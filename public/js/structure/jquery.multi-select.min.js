(function(b){var h={init:function(a){this.settings={disabledClass:"disabled"};if(a)this.settings=b.extend(this.settings,a);var d=this;d.hide();d.each(function(){var a=b(this);a.attr("id",a.attr("id")!=void 0?a.attr("id"):"ms-"+Math.ceil(Math.random()*1E3));var f=b('<div id="ms-'+a.attr("id")+'" class="ms-container"></div>'),c=b('<div class="ms-selectable"></div>'),i=b('<div class="ms-selection"></div>'),g=b("<ul></ul>"),h=b("<ul></ul>");a.data("settings",d.settings);a.children("option").each(function(){var c=
b('<li ms-value="'+b(this).val()+'">'+b(this).text()+"</li>");b(this).attr("title")&&c.attr("title",b(this).attr("title"));if(b(this).attr("disabled")||a.attr("disabled"))c.attr("disabled","disabled"),c.addClass(d.settings.disabledClass);c.click(function(){a.multiSelect("select",b(this).attr("ms-value"))});g.append(c)});d.settings.selectableHeader&&c.append(d.settings.selectableHeader);c.append(g);d.settings.selectedHeader&&i.append(d.settings.selectedHeader);i.append(h);f.append(c);f.append(i);a.after(f);
a.children("option:selected").each(function(){a.multiSelect("select",b(this).val(),"init")})})},select:function(a,d){var e=this,f=e.val()?e.val():[],c=b.inArray(a,f),i=e.find('option[value="'+a+'"]').text();titleAttr=e.find('option[value="'+a+'"]').attr("title");if(c==-1||d=="init"){var c=b('<li ms-value="'+a+'">'+i+"</li>").detach(),f=b.merge(f,[a]),g=b("#ms-"+e.attr("id")+" .ms-selectable ul"),h=b("#ms-"+e.attr("id")+" .ms-selection ul"),g=g.children('li[ms-value="'+a+'"]');g.attr("disabled")||
(g.hide(),e.val(f),titleAttr&&c.attr("title",titleAttr),c.click(function(){e.multiSelect("deselect",b(this).attr("ms-value"))}),h.append(c),typeof e.data("settings").afterSelect=="function"&&d!="init"&&e.data("settings").afterSelect.call(this,a,i))}},deselect:function(a){var d=this.val()?this.val():[],e=!1,d=b.map(d,function(b){if(b!=a)return b;else e=!0;return!1});if(e){var f=b("#ms-"+this.attr("id")+" .ms-selectable ul"),c=b("#ms-"+this.attr("id")+" .ms-selection ul"),f=f.children('li[ms-value="'+
a+'"]'),c=c.children('li[ms-value="'+a+'"]');this.val(d);f.show();c.remove();typeof this.data("settings").afterDeselect=="function"&&this.data("settings").afterDeselect.call(this,a,c.text())}},select_all:function(){var a=this;a.children("option").each(function(){a.multiSelect("select",b(this).val(),"select_all")})},deselect_all:function(){var a=this;a.children("option").each(function(){a.multiSelect("deselect",b(this).val(),"deselect_all")})}};b.fn.multiSelect=function(a){if(h[a])return h[a].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return h.init.apply(this,arguments);else console.log&&console.log("Method "+a+" does not exist on jquery.multiSelect");return!1}})(jQuery);